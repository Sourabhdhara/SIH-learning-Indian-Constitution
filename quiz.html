<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Constitution Quiz</title>
    <style>
        :root {
            --color-primary: #3949AB;
            --color-primary-hover: #303F9F;
            --color-secondary: #E91E63;
            --color-secondary-hover: #D81B60;
            --color-bg: #000000;
            --color-surface: #121212;
            --text-primary: #FFFFFF;
            --text-secondary: #b0b0b0;
            --border: #333333;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--color-bg);
            margin: 0;
            color: var(--text-primary);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .quiz-wrapper {
            position: relative;
            width: 100%;
            max-width: 600px;
        }

        .quiz-container {
            width: 100%;
            background: var(--color-surface);
            border: 1px solid var(--border);
            border-radius: 14px;
            box-shadow: 0 4px 24px rgba(0,0,0,0.09);
            padding: 32px;
            color: var(--text-primary);
            text-align: center;
            position: relative;
        }

        .quiz-header {
            font-size: 1.8em;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--color-primary);
            padding-right: 120px; /* Space for the button */
        }

        .quiz-subheader {
            font-size: 1.4em;
            margin: 10px 0 20px 0;
            color: var(--text-secondary);
        }

        .quiz-score {
            font-size: 1.5em;
            font-weight: bold;
            margin: 20px 0;
            color: var(--color-primary);
        }

        .quiz-question {
            font-weight: 500;
            font-size: 1.13em;
            margin: 26px 0 20px 0;
        }

        .quiz-options button {
            width: 100%;
            background: var(--color-bg);
            border: 1px solid var(--border);
            border-radius: 5px;
            margin: 9px 0;
            padding: 0.8em;
            cursor: pointer;
            font-size: 1em;
            text-align: left;
            transition: background 0.2s;
            color: var(--text-primary);
        }

        .quiz-options button:hover {
            background: var(--color-primary);
            color: #fff;
        }

        #nextQuiz {
            background: var(--color-secondary);
            color: white;
            border: none;
            padding: 0.7em 2em;
            border-radius: 6px;
            cursor: pointer;
            margin: 12px 0 0 0;
            font-size: 1em;
        }

        #quiz-result, #final-score {
            margin-top: 16px;
            font-size: 1.15em;
            font-weight: bold;
        }

        #manageQuizBtn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--color-primary);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            z-index: 10;
        }

        #manageQuizPanel {
            display: none;
            width: 100%;
            margin: 32px auto;
            background: var(--color-surface);
            border: 1px solid var(--border);
            border-radius: 12px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.08);
            padding: 22px;
            color: var(--text-primary);
        }

        #manageQuizPanel h3 {
            color: var(--color-primary);
            margin-top: 0;
        }

        #manageQuizPanel input, #manageQuizPanel select {
            width: 100%;
            padding: 10px;
            margin-bottom: 12px;
            border: 1px solid var(--border);
            border-radius: 4px;
            background: var(--color-bg);
            color: var(--text-primary);
        }

        #manageQuizPanel button {
            background: var(--color-secondary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 8px;
        }

        #closeManageQuiz {
            background: #757575;
            margin-left: 12px;
        }

        #addQuizMsg {
            margin-top: 8px;
            font-weight: 600;
            color: var(--color-primary);
        }

        .question-list {
            margin-top: 20px;
            text-align: left;
        }

        .question-item {
            background: var(--color-bg);
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 8px;
            border-left: 4px solid var(--color-primary);
        }

        .question-item h4 {
            margin: 0 0 10px 0;
            color: var(--color-primary);
        }

        .question-options {
            padding-left: 20px;
            margin: 10px 0;
        }

        .question-actions {
            margin-top: 10px;
        }

        .delete-btn {
            background: var(--color-secondary);
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
        }

        .password-prompt {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .password-container {
            background: var(--color-surface);
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            width: 300px;
        }

        .password-container input {
            width: 100%;
            padding: 10px;
            margin: 15px 0;
            border: 1px solid var(--border);
            border-radius: 4px;
            background: var(--color-bg);
            color: var(--text-primary);
        }

        .password-container button {
            background: var(--color-primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <!-- Password Prompt Modal -->
    <div class="password-prompt" id="passwordPrompt">
        <div class="password-container">
            <h3>Enter Password</h3>
            <input type="password" id="passwordInput" placeholder="Enter password">
            <div>
                <button id="submitPassword">Submit</button>
                <button id="cancelPassword" style="background: #757575;">Cancel</button>
            </div>
            <p id="passwordError" style="color: #E91E63; display: none;">Incorrect password. Try again.</p>
        </div>
    </div>

    <div class="quiz-wrapper">
        <button id="manageQuizBtn">Manage Quiz</button>
        
        <div class="quiz-container">
            <div class="quiz-header">Indian Constitution Quiz</div>
            <div class="quiz-subheader">Quiz Completed</div>
            <div class="quiz-score">Your Score: 2 / 2</div>
            
            <div id="quizQuestion"></div>
            <div class="quiz-options" id="quizOptions"></div>
            <div id="quiz-result"></div>
            <button id="nextQuiz" style="display:none;">Next</button>
            <div id="final-score"></div>
        </div>

        <div id="manageQuizPanel">
            <h3>Manage Quiz Questions</h3>
            
            <h4>Add a New Question</h4>
            <form id="addQuizForm">
                <input type="text" id="mqQuestion" placeholder="Question text" required><br>
                <input type="text" id="mqOpt1" placeholder="Option 1" required><br>
                <input type="text" id="mqOpt2" placeholder="Option 2" required><br>
                <input type="text" id="mqOpt3" placeholder="Option 3" required><br>
                <input type="text" id="mqOpt4" placeholder="Option 4" required><br>
                Correct Option: 
                <select id="mqCorrect" required>
                    <option value="0">Option 1</option>
                    <option value="1">Option 2</option>
                    <option value="2">Option 3</option>
                    <option value="3">Option 4</option>
                </select>
                <br>
                <button type="submit">Add Question</button>
                <button type="button" id="closeManageQuiz">Close</button>
            </form>
            <div id="addQuizMsg"></div>
            
            <div class="question-list" id="questionList">
                <h4>Current Questions</h4>
                <!-- Questions will be listed here -->
            </div>
        </div>
    </div>

    <script>
        // Quiz data and functionality
        let quizData = [
            {
                q: "When did the Indian Constitution come into effect?",
                options: ["1947", "1950", "1952", "1960"],
                answer: 1
            },
            {
                q: "Who is known as the Father of the Indian Constitution?",
                options: ["Jawaharlal Nehru", "Dr. Ambedkar", "Sardar Patel", "Rajendra Prasad"],
                answer: 1
            }
        ];
        
        let currentQuiz = 0, score = 0, answered = false;

        // Password protection
        const PASSWORD = "1987";
        const passwordPrompt = document.getElementById('passwordPrompt');
        const passwordInput = document.getElementById('passwordInput');
        const submitPassword = document.getElementById('submitPassword');
        const cancelPassword = document.getElementById('cancelPassword');
        const passwordError = document.getElementById('passwordError');

        // Show/hide manage panel with password protection
        document.getElementById('manageQuizBtn').onclick = function() {
            passwordPrompt.style.display = 'flex';
            passwordInput.value = '';
            passwordError.style.display = 'none';
        };

        submitPassword.onclick = function() {
            if (passwordInput.value === PASSWORD) {
                passwordPrompt.style.display = 'none';
                document.getElementById('manageQuizPanel').style.display = 'block';
                renderQuestionList();
            } else {
                passwordError.style.display = 'block';
            }
        };

        cancelPassword.onclick = function() {
            passwordPrompt.style.display = 'none';
        };

        // Close manage panel
        document.getElementById('closeManageQuiz').onclick = function() {
            document.getElementById('manageQuizPanel').style.display = 'none';
            document.getElementById('addQuizMsg').textContent = '';
        };

        // Add quiz question
        document.getElementById('addQuizForm').onsubmit = function(e) {
            e.preventDefault();
            let quizDataLocal = JSON.parse(localStorage.getItem("quizData")) || [];
            
            quizDataLocal.push({
                q: document.getElementById('mqQuestion').value,
                options: [
                    document.getElementById('mqOpt1').value,
                    document.getElementById('mqOpt2').value,
                    document.getElementById('mqOpt3').value,
                    document.getElementById('mqOpt4').value
                ],
                answer: parseInt(document.getElementById('mqCorrect').value)
            });
            
            localStorage.setItem("quizData", JSON.stringify(quizDataLocal));
            document.getElementById('addQuizMsg').textContent = "Question added successfully!";
            document.getElementById('addQuizForm').reset();
            
            // Update the displayed list
            renderQuestionList();
            
            // Update the quizData for the current session
            quizData = quizDataLocal;
        };

        // Render question list for management
        function renderQuestionList() {
            const questionList = document.getElementById('questionList');
            const stored = JSON.parse(localStorage.getItem("quizData")) || quizData;
            
            if (stored.length === 0) {
                questionList.innerHTML = '<p>No questions added yet.</p>';
                return;
            }
            
            let questionsHTML = '<h4>Current Questions</h4>';
            stored.forEach((question, index) => {
                questionsHTML += `
                    <div class="question-item">
                        <h4>${index + 1}. ${question.q}</h4>
                        <div class="question-options">
                            ${question.options.map((opt, i) => `
                                <div>${i + 1}. ${opt} ${i === question.answer ? ' (Correct)' : ''}</div>
                            `).join('')}
                        </div>
                        <div class="question-actions">
                            <button class="delete-btn" data-index="${index}">Delete</button>
                        </div>
                    </div>
                `;
            });
            
            questionList.innerHTML = questionsHTML;
            
            // Add event listeners to delete buttons
            document.querySelectorAll('.delete-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const index = parseInt(this.getAttribute('data-index'));
                    deleteQuestion(index);
                });
            });
        }

        // Delete a question
        function deleteQuestion(index) {
            if (confirm('Are you sure you want to delete this question?')) {
                let stored = JSON.parse(localStorage.getItem("quizData")) || quizData;
                stored.splice(index, 1);
                localStorage.setItem("quizData", JSON.stringify(stored));
                quizData = stored;
                renderQuestionList();
                
                // If we're in the middle of the quiz, reset it
                if (currentQuiz >= index) {
                    currentQuiz = 0;
                    score = 0;
                    showQuizQuestion();
                }
            }
        }

        // Quiz functionality
        function showQuizQuestion() {
            answered = false;
            document.getElementById('quiz-result').textContent = '';
            document.getElementById('nextQuiz').style.display = 'none';
            document.getElementById('final-score').textContent = '';
            
            // Update quizData from localStorage if available
            let stored = JSON.parse(localStorage.getItem("quizData"));
            if(stored && stored.length) {
                quizData = stored;
            }
            
            if (quizData.length === 0) {
                document.getElementById('quizQuestion').textContent = 'No quiz questions available.';
                document.getElementById('quizOptions').innerHTML = '';
                return;
            }
            
            const data = quizData[currentQuiz];
            document.getElementById('quizQuestion').textContent = (currentQuiz + 1) + '. ' + data.q;
            
            const opts = document.getElementById('quizOptions');
            opts.innerHTML = '';
            
            data.options.forEach((option, i) => {
                const btn = document.createElement('button');
                btn.textContent = option;
                btn.onclick = () => checkAnswer(i);
                opts.appendChild(btn);
            });
        }

        function checkAnswer(idx) {
            if (answered) return;
            answered = true;
            
            const correct = quizData[currentQuiz].answer;
            if (idx === correct) {
                document.getElementById('quiz-result').textContent = '✅ Correct!';
                document.getElementById('quiz-result').style.color = "#138808";
                score++;
            } else {
                document.getElementById('quiz-result').textContent = '❌ Incorrect! Correct answer: ' + quizData[currentQuiz].options[correct];
                document.getElementById('quiz-result').style.color = "#c21e2f";
            }
            
            document.getElementById('nextQuiz').style.display = 'inline-block';
        }

        document.getElementById('nextQuiz').onclick = function() {
            currentQuiz++;
            if (currentQuiz < quizData.length) {
                showQuizQuestion();
            } else {
                document.getElementById('quizQuestion').textContent = 'Quiz Complete!';
                document.getElementById('quizOptions').innerHTML = '';
                document.getElementById('quiz-result').textContent = '';
                document.getElementById('nextQuiz').style.display = 'none';
                document.getElementById('final-score').textContent =
                    `Your Score: ${score} / ${quizData.length}`;
            }
        };

        // Initialize quiz
        showQuizQuestion();
    </script>
</body>
</html>